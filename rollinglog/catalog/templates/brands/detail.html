{% extends 'base.html' %}
{% load static %}
{% block content %}
<link rel="stylesheet" href="{% static 'css/brands/brand_detail.css' %}">

<section class="brand-detail">
    <h1>{{ brand.name }}</h1>
    <p><strong>Origin:</strong> {{ brand.origin_country }}</p>
    <p>{{ brand.description }}</p>

    <h2>Rolling Papers from this Brand</h2>
    {% if brand.rollingpaper_set.all %}
        <ul>
          {% for paper in brand.rollingpaper_set.all %}
          <li>
            <a href="{% url 'paper-detail' paper.id %}">{{ paper.name }}</a>
            - {{ paper.size }}, {{ paper.material }}, Rating: {{ paper.rating }}
          </li>
          {% endfor %}
        </ul>
    {% else %}
        <p>No papers listed fot this brand yet.</p>
    {% endif %}

    <h2>Products from {{ brand.name }}</h2>
    {% if brand.products.all %}
        <div class="product-grid">
          {% for product in brand.products.all %}
          <div class="product-card">
            {% if product.manufacturer_image_url %}
              <img src="{{ product.manufacturer_image_url }}" alt="{{ product.name }}" loading="lazy" style="max-width: 200px; height: auto;">
            {% else %}
              <div style="width: 200px; height: 200px; background: #eee; display: flex; align-items: center; justify-content: center;">No Image</div>
            {% endif %}
            <h3>{{ product.name }}</h3>
            <p><strong>Material:</strong> {{ product.material }}</p>
            <p><strong>Size:</strong> {{ product.size }}</p>
            {% if product.flavor %}
              <p><strong>Flavor:</strong> {{ product.flavor }}</p>
            {% endif %}
          </div>
          {% endfor %}
        </div>
    {% else %}
        <p>No products listed for this brand yet.</p>
    {% endif %}

      <div class="actions">
        <a href="{% url 'brand-update' brand.id %}">Edit</a> |
        <a href="{% url 'brand-delete' brand.id %}">Delete</a> |
        <a href="{% url 'brand-index' %}">Back to All Brands</a>
    </div>
</section>
{% endblock %}